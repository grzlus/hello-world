var App,Glue,Gui,LocalStorage,UseCase,change_function,get_function,__slice=[].slice,__hasProp={}.hasOwnProperty,__bind=function(a,b){return function(){return a.apply(b,arguments)}};get_function=function(a,b){var c;return c=a[b],c!=null?c:function(){}},change_function=function(a,b,c,d){return d==null&&(d=1),a[b]=function(){var b,e,f;return b=1<=arguments.length?__slice.call(arguments,0):[],f=function(){var d,f,g;g=[];for(d=0,f=c.length;d<f;d++)e=c[d],g.push(e.apply(a,b));return g}(),f[d]}},this.Before=function(a,b,c){var d;return d=get_function(a,b),change_function(a,b,[c,d]),!0},this.BeforeAnyCallback=function(a,b,c){return console.warn("TODO")},this.After=function(a,b,c){var d;return d=get_function(a,b),change_function(a,b,[d,c],0),!0},this.Around=function(a,b,c,d){var e;return e=get_function(a,b),change_function(a,b,[c,e,d]),!0},this.AfterAll=function(a,b,c){var d,e,f,g;g=[];for(e=0,f=b.length;e<f;e++)d=b[e],g.push(After(a,d,c));return g},this.LogAll=function(a){var b,c,d;d=[];for(b in a){if(!__hasProp.call(a,b))continue;c=a[b],c.call!=null?d.push(function(b){return Before(a,b,function(){return console.log("calling: "+b)})}(b)):d.push(void 0)}return d},this.AutoBind=function(a,b){var c,d,e;e=[];for(c in a)d=a[c],d.call!=null?e.push(function(c){var d;d=/(.*)Clicked/.exec(c)[1];if(d!=null&&b[d])return After(a,c,function(a){return b[d](a)})}(c)):e.push(void 0);return e},LocalStorage=function(){function a(a){this.namespace=a,this.flush=__bind(this.flush,this),this.remove=__bind(this.remove,this),this.get=__bind(this.get,this),this.set=__bind(this.set,this)}return a.prototype.set=function(a,b){return console.log(b),$.jStorage.set(""+this.namespace+"/"+a,b)},a.prototype.get=function(a){return $.jStorage.get(""+this.namespace+"/"+a)},a.prototype.remove=function(a){return $.jStorage.deleteKey(""+this.namespace+"/"+a)},a.prototype.flush=function(){var a,b,c,d,e;d=$.jStorage.index(),e=[];for(b=0,c=d.length;b<c;b++)a=d[b],a.match("^"+this.namespace)?e.push($.jStorage.deleteKey(a)):e.push(void 0);return e},a}(),UseCase=function(){function a(){this.restart=__bind(this.restart,this),this.greetUser=__bind(this.greetUser,this),this.nameProvided=__bind(this.nameProvided,this),this.askForName=__bind(this.askForName,this),this.start=__bind(this.start,this)}return a.prototype.start=function(){return this.askForName()},a.prototype.askForName=function(){},a.prototype.nameProvided=function(a){return this.greetUser(a)},a.prototype.greetUser=function(a){},a.prototype.restart=function(){return this.askForName()},a}(),Gui=function(){function a(){this.hideGreetMessage=__bind(this.hideGreetMessage,this),this.restartClicked=__bind(this.restartClicked,this),this.showGreetMessage=__bind(this.showGreetMessage,this),this.hideAskForName=__bind(this.hideAskForName,this),this.confirmNameButtonClicked=__bind(this.confirmNameButtonClicked,this),this.showAskForName=__bind(this.showAskForName,this),this.createElementFor=__bind(this.createElementFor,this)}return a.prototype.createElementFor=function(a,b){var c,d,e,f;return e=$(a).html(),f=Handlebars.compile(e),d=f(b),c=$(d)},a.prototype.showAskForName=function(){var a,b,c=this;return b=this.createElementFor("#ask-for-name-template"),$(".main").append(b),a=$("#confirm-name-button"),a.click(function(){return c.confirmNameButtonClicked($("#name-input").val())}),$("#name-input").focus()},a.prototype.confirmNameButtonClicked=function(a){},a.prototype.hideAskForName=function(){return $(".ask-for-name").remove()},a.prototype.showGreetMessage=function(a){var b,c=this;return b=this.createElementFor("#greet-message-template",{name:a}),$(".main").append(b),$("#restart-link").click(function(){return c.restartClicked()})},a.prototype.restartClicked=function(){},a.prototype.hideGreetMessage=function(){return $(".greet-message").remove()},a}(),Glue=function(){function a(a,b){var c=this;this.useCase=a,this.gui=b,After(this.useCase,"askForName",function(){return c.gui.showAskForName()}),After(this.useCase,"nameProvided",function(){return c.gui.hideAskForName()}),After(this.useCase,"greetUser",function(a){return c.gui.showGreetMessage(a)}),After(this.useCase,"restart",function(){return c.gui.hideGreetMessage()}),After(this.gui,"restartClicked",function(){return c.useCase.restart()}),After(this.gui,"confirmNameButtonClicked",function(a){return c.useCase.nameProvided(a)}),LogAll(this.useCase),LogAll(this.gui)}return a}(),App=function(){function a(){var a,b,c;c=new UseCase,b=new Gui,a=new Glue(c,b),c.start(),window.useCase=c}return a}(),new App